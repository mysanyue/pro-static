<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CSS3折纸效果</title>
    <style>
      body {
        margin: 0;
      }

      #wrap {
        position: relative;
        width: 160px;
        margin: 30px auto;
        perspective: 800px;
      }

      #wrap h2 {
        position: relative;
        z-index: 2;
        height: 40px;
        background: #f60;
        color: #fff;
        font: 16px/40px '微软雅黑';
        text-align: center;
        margin: 0;
      }

      #wrap div {
        position: absolute;
        top: 32px;
        width: 100%;
        left: 0;
        transform-style: preserve-3d;
        transform-origin: top;
        transform: rotateX(-120deg);
      }

      #wrap span {
        display: block;
        height: 30px;
        background: #9f0;
        font: 12px/30px '宋体';
        color: #fff;
        text-indent: 20px;
        box-shadow: inset 0 0 0 20px rgba(0, 0, 0, 0.5);
        transition: 1s;
      }

      #wrap > div {
        top: 40px;
      }

      #wrap .show {
        animation: open 2s;
        transform: rotateX(0deg);
      }

      #wrap .close {
        animation: close 1s;
        transform: rotateX(-120deg);
      }

      #wrap .show > span {
        box-shadow: inset 0 0 0 20px rgba(0, 0, 0, 0);
      }

      #btn {
        position: absolute;
      }

      @keyframes open {
        0% {
          transform: rotateX(-120deg);
        }

        25% {
          transform: rotateX(30deg);
        }

        50% {
          transform: rotateX(-15deg);
        }

        75% {
          transform: rotateX(8deg);
        }

        100% {
          transform: rotateX(0deg);
        }
      }

      @keyframes close {
        0% {
          transform: rotateX(0deg);
        }

        100% {
          transform: rotateX(-120deg);
        }
      }
    </style>
  </head>

  <body>
    <input type="button" value="按钮" id="btn" />
    <div id="wrap">
      <h2>我是标题</h2>
      <div>
        <span>选项1</span>
        <div>
          <span>选项2</span>
          <div>
            <span>选项3</span>
            <div>
              <span>选项4</span>
              <div>
                <span>选项5</span>
                <div>
                  <span>选项6</span>
                  <div>
                    <span>选项7</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      var oBtn = document.getElementById('btn')
      var oWrap = document.getElementById('wrap')
      var aDiv = oWrap.getElementsByTagName('div')
      var iDelay = 150
      var timer = null
      var i = 0
      var bOff = true

      oBtn.onclick = function () {
        if (timer) return false
        if (bOff) {
          timer = setInterval(function () {
            aDiv[i].className = 'show'

            if (i != aDiv.length - 1) {
              i++
            } else {
              clearInterval(timer)
              timer = null
              bOff = false
            }
          }, iDelay)
        } else {
          timer = setInterval(function () {
            aDiv[i].className = 'close'

            if (i > 0) {
              i--
            } else {
              clearInterval(timer)
              timer = null
              bOff = true
            }
          }, iDelay)
        }
      }
    </script>
  </body>
</html>
